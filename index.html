html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>ÙƒÙ„ Ø³Ù†Ø© ÙˆØ§Ù†ØªÙŠ Ø·ÙŠØ¨Ø© ÙŠØ§ Ù…Ø§Ù…Ø§ â¤ï¸</title>
  <meta name="theme-color" content="#ff6b88"/>
  <link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='85' font-size='80'%3E%F0%9F%92%96%3C/text%3E%3C/svg%3E">
  <style>
    :root{--bg:#fff6f8;--accent:#ff5c8d;--muted:#666}
    *{box-sizing:border-box}
    body{
      margin:0;min-height:100vh;background:linear-gradient(180deg,var(--bg),#fff);
      font-family: 'Cairo', sans-serif, Arial;display:flex;align-items:center;justify-content:center;
      padding:18px;text-align:center;overflow:hidden;
    }
    .card{width:100%;max-width:480px;background:white;border-radius:18px;padding:18px;box-shadow:0 12px 30px rgba(0,0,0,0.08)}
    h1{color:var(--accent);margin:6px 0;font-size:22px}
    p.lead{color:#333;margin:6px 0 14px}
    .choices{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}
    button.opt{flex:1 1 45%;min-width:130px;padding:10px;border-radius:12px;border:0;background:linear-gradient(180deg,#ff7a9e,#ff5c8d);color:#fff;font-weight:700;cursor:pointer}
    button.opt:active{transform:translateY(2px)}
    #result{margin-top:16px;font-size:18px;color:var(--accent);font-weight:700}
    .small{font-size:12px;color:var(--muted);margin-top:8px}
    .btn{margin-top:12px;padding:10px 14px;border-radius:10px;border:0;background:#ffb6cc;color:#8b0033;font-weight:700;cursor:pointer}
    /* hearts */
    .heart{position:fixed;font-size:22px;pointer-events:none;will-change:transform,opacity}
    @keyframes floatUp {0%{transform:translateY(0) scale(1);opacity:1}100%{transform:translateY(-650px) scale(1.6);opacity:0}}
    /* small install hint */
    .install-hint{margin-top:10px;background:#fff6fa;border-radius:10px;padding:8px;color:#6b2a3a;font-size:13px}
  </style>
</head>
<body>
  <div class="card" role="application" aria-label="Ù‡Ø¯ÙŠØ© Ù„Ù…Ø§Ù…Ø§">
    <h1>ğŸ‰ ÙƒÙ„ Ø³Ù†Ø© ÙˆØ§Ù†ØªÙŠ Ø·ÙŠØ¨Ø© ÙŠØ§ Ù…Ø§Ù…Ø§ ğŸ‰</h1>
    <p class="lead">Ø§Ø®ØªØ§Ø±ÙŠ Ø­Ø§Ø¬Ø© Ù…Ù† Ø§Ù„Ù„ÙŠ ØªØ­Ø¨ÙŠÙ‡Ø§ØŒ ÙˆØ¨Ø¹Ø¯ÙŠÙ† Ø§Ù„Ù…ÙØ§Ø¬Ø£Ø© ğŸ˜‚</p>

    <div class="choices" id="choices">
      <button class="opt" onclick="pick('ÙØ·Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±ÙŠØ±')">ÙØ·Ø§Ø± Ø¹Ù„Ù‰ Ø§Ù„Ø³Ø±ÙŠØ±</button>
      <button class="opt" onclick="pick('ÙŠÙˆÙ… Ø¯Ù„Ø¹')">ÙŠÙˆÙ… Ø¯Ù„Ø¹</button>
      <button class="opt" onclick="pick('Ù‡Ø¯ÙŠØ© Ø®Ø§ØµØ©')">Ù‡Ø¯ÙŠØ© Ø®Ø§ØµØ©</button>
      <button class="opt" onclick="pick('Ø£ÙƒÙ„Ø© Ø¨ØªØ­Ø¨ÙŠÙ‡Ø§')">Ø£ÙƒÙ„Ø© Ø¨ØªØ­Ø¨ÙŠÙ‡Ø§</button>
    </div>

    <div id="result" aria-live="polite"></div>
    <div class="small">Ù…Ù…ÙƒÙ† ØªØ¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø«Ù„Ø§Ø« Ù†Ù‚Ø§Ø· ÙÙŠ Ø§Ù„Ù…ØªØµÙØ­ ÙˆØªØ®ØªØ§Ø± "Add to Home screen" Ø¹Ù„Ø´Ø§Ù† ÙŠØ¨Ù‚Ù‰ Ø£ÙŠÙ‚ÙˆÙ†Ø© Ø²ÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚.</div>
    <div id="installHint" class="install-hint" style="display:none">Ù„Ùˆ Ø¸Ù‡Ø±Ù„Ùƒ Ù…Ø±Ø¨Ø¹ "Install" / "ØªØ«Ø¨ÙŠØª" Ù…Ù† Ø§Ù„Ù…ØªØµÙØ­ â€” Ø¯ÙˆØ³ Ø¹Ù„ÙŠÙ‡ Ø¹Ø´Ø§Ù† ÙŠØ«Ø¨Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ ÙØ¹Ù„ÙŠÙ‹Ø§.</div>
  </div>

<script>
/* --- Manifest Ø¯ÙŠÙ†Ø§Ù…ÙŠÙƒÙŠ (Ø¹Ø´Ø§Ù† Ù„Ùˆ ÙØªØ­ Ø§Ù„Ù…Ù„Ù Ù…Ø­Ù„ÙŠÙ‹Ø§ ÙŠØ¨Ù‚Ù‰ ÙÙŠ manifest) --- */
(function attachManifest(){
  const manifest = {
    "name": "Ù‡Ø¯ÙŠØ© Ù„Ù…Ø§Ù…Ø§",
    "short_name": "Ù‡Ø¯ÙŠØ© Ù„Ù…Ø§Ù…Ø§",
    "start_url": ".",
    "display": "standalone",
    "background_color": "#fff6f8",
    "theme_color": "#ff6b88",
    "icons": [
      {"src":"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ctext y='85' font-size='80'%3E%F0%9F%92%96%3C/text%3E%3C/svg%3E","sizes":"192x192","type":"image/svg+xml"}
    ]
  };
  const blob = new Blob([JSON.stringify(manifest)], {type: 'application/json'});
  const url = URL.createObjectURL(blob);
  const link = document.createElement('link');
  link.rel = 'manifest';
  link.href = url;
  document.head.appendChild(link);
})();

/* --- simple "app" behavior --- */
const choicesDiv = document.getElementById('choices');
const resultDiv = document.getElementById('result');

function pick(choice){
  choicesDiv.style.display = 'none';
  resultDiv.innerHTML = `ÙƒÙ†Øª Ù‡Ø¬Ø¨Ù„Ùƒ ${choice}ØŒ Ø¨Ø³ <span style="color:#333">Ù…Ù…Ø¹ÙŠØ´ ÙÙ„ÙˆØ³ ğŸ˜‚</span><br><span style="display:block;margin-top:8px;color:#ff3b78;font-weight:800">ÙƒÙ„ Ø³Ù†Ø© ÙˆØ§Ù†ØªÙŠ Ø·ÙŠØ¨Ø© ÙŠØ§ Ù…Ø§Ù…Ø§ â¤ï¸</span><button class="btn" style="display:block;margin:12px auto" onclick="restart()">Ø§Ø®ØªÙŠØ§Ø± ØªØ§Ù†ÙŠ</button>`;
  spawnHearts(28);
  // Ù„Ùˆ Ù…ØªØµÙØ­ Ø¨ÙŠØ¯Ø¹Ù… ÙˆØ§Ø¬Ù‡Ø© ØªØ«Ø¨ÙŠØª ØªÙ„Ù‚Ø§Ø¦ÙŠØ© Ù†Ø¹Ø±Ø¶ ØªÙ„Ù…ÙŠØ­
  setTimeout(()=>{ showInstallHint(); },600);
}

/* restart */
function restart(){
  choicesDiv.style.display = '';
  resultDiv.innerHTML = '';
}

/* hearts */
function spawnHearts(n){
  for(let i=0;i<n;i++){
    const h = document.createElement('div');
    h.className='heart';
    h.textContent = (Math.random()>0.25)?'ğŸ’–':'ğŸ’•';
    h.style.left = (Math.random()*90)+'vw';
    h.style.top = (70+Math.random()*25)+'vh';
    h.style.fontSize = (16+Math.random()*28)+'px';
    const dur = (2.5 + Math.random()*3).toFixed(2)+'s';
    h.style.animation = `floatUp ${dur} linear forwards`;
    document.body.appendChild(h);
    setTimeout(()=>h.remove(), 7000);
  }
}

/* --- service worker registration (Ù„Ùˆ Ø§Ù„ØµÙØ­Ø© Ù…ØªØ®Ø¯Ù…Ø© Ù…Ù† HTTP/HTTPS) --- */
if('serviceWorker' in navigator){
  try{
    // Ù†Ø¨Ù†ÙŠ ÙƒÙˆØ¯ Ø§Ù„Ù€sw ÙƒÙ€ blob Ø¹Ø´Ø§Ù† Ù…ÙŠØ­ØªØ§Ø¬Ø´ Ù…Ù„Ù Ø®Ø§Ø±Ø¬ÙŠ
    const swCode = `self.addEventListener('install', e=>{self.skipWaiting();});self.addEventListener('activate', e=>{e.waitUntil(clients.claim());});self.addEventListener('fetch', e=>{e.respondWith(fetch(e.request).catch(()=>caches.match(e.request)))})`;
    const swBlob = new Blob([swCode], {type: 'application/javascript'});
    const swUrl = URL.createObjectURL(swBlob);
    navigator.serviceWorker.register(swUrl).then(()=>console.log('sw registered')).catch(()=>console.log('sw failed'));
  }catch(e){console.log('sw err', e)}
}

/* --- Ù…Ø­Ø§ÙˆÙ„Ø© Ø¥Ø¸Ù‡Ø§Ø± ØªÙ„Ù…ÙŠØ­ Ø§Ù„ØªØ«Ø¨ÙŠØª Ù„Ùˆ Ù…ØªØ§Ø­ --- */
let deferredPrompt = null;
window.addEventListener('beforeinstallprompt', (e) => {
  // Ù…Ù†Ø¹ Ø§Ù„Ù…ØªØµÙØ­ Ù…Ù† Ø¥Ø¸Ù‡Ø§Ø± Ø§Ù„Ø¯ÙŠØ§Ù„ÙˆØº Ø§Ù„ØªÙ„Ù‚Ø§Ø¦ÙŠ ÙˆØ§Ø­ÙØ¸ Ø§Ù„Ø­Ø¯Ø«
  e.preventDefault();
  deferredPrompt = e;
  // Ù†Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø¨Ø³ÙŠØ·Ø© Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù…
  document.getElementById('installHint').style.display = 'block';
});

function showInstallHint(){
  if(deferredPrompt){
    // Ù†Ø¬Ø±Ø¨ Ù†Ø¹Ø±Ø¶ Ù†Ø§ÙØ°Ø© Ø§Ù„ØªØ«Ø¨ÙŠØª
    deferredPrompt.prompt();
    deferredPrompt.userChoice.then(choiceResult => {
      if(choiceResult.outcome === 'accepted') {
        console.log('user accepted install');
      }
      deferredPrompt = null;
      document.getElementById('installHint').style.display = 'none';
    });
  } else {
    // Ù„Ùˆ Ù…Ø§ÙÙŠØ´ eventØŒ Ø³ÙŠØ¨Ù‡Ø§ Ù„Ù„Ù…Ø³ØªØ®Ø¯Ù… ÙŠØ¶ØºØ· Ø§Ù„Ø«Ù„Ø§Ø« Ù†Ù‚Ø§Ø· ÙˆÙŠØ®ØªØ§Ø± Add to Home screen
    document.getElementById('installHint').style.display = 'block';
    setTimeout(()=>document.getElementById('installHint').style.display='none',5000);
  }
}
</script>
</body>
</html>
